import{m as ee,a as te,u as oe,r as u,n as le,l as se,j as w,d as r,o as _,e as y,g as s,s as o,f as e,t as l,F as ae,v as U,z as ne,A as M,y as m,x as N}from"./index-2eb3e8c7.js";const ce=["href","onClick"],de={class:"text-primary font-semibold"},ie=["href","target"],re={class:"text-color"},me={class:"grid"},ue={class:"col-12"},_e={class:"card"},pe={class:"my-1"},ge={class:"m-0"},he={class:"my-1"},ye={class:"m-0",style:{color:"black"}},fe={key:0,style:{color:"green"}},ve={key:1,class:"text-primary"},xe={class:"grid grid-nogutter"},we={class:"col-12 md:col-7 lg:col-7 grid grid-nogutter"},be=e("div",{class:"px-3 py-1 col-6 md:col-4 lg:col-4"},[e("small",null,"Outbound Date")],-1),ke={class:"px-3 py-1 col-6 md:col-8 lg:col-8"},Te={class:"col-12 md:col-5 lg:col-5 grid grid-nogutter"},je=e("div",{class:"px-3 py-1 col-6 md:col-5 lg:col-5"},[e("small",null,"Movement Type")],-1),Se={class:"px-3 py-1 col-6 md:col-7 lg:col-7"},Ce={class:"col-12 md:col-7 lg:col-7 grid grid-nogutter"},Ae=e("div",{class:"px-3 py-1 col-6 md:col-4 lg:col-4"},[e("small",null,"Reference Doc")],-1),Be={class:"px-3 py-1 col-6 md:col-8 lg:col-8"},Re={class:"col-12 md:col-5 lg:col-5 grid grid-nogutter"},De=e("div",{class:"px-3 py-1 col-6 md:col-5 lg:col-5"},[e("small",null,"Good Recipient")],-1),Ee={class:"px-3 py-1 col-6 md:col-7 lg:col-7"},Pe={class:"col-12 md:col-7 lg:col-7 grid grid-nogutter"},Ie=e("div",{class:"px-3 py-1 col-6 md:col-4 lg:col-4"},[e("small",null,"Type")],-1),$e={class:"px-3 py-1 col-6 md:col-8 lg:col-8"},Oe={class:"col-12 md:col-5 lg:col-5 grid grid-nogutter"},Fe=e("div",{class:"px-3 py-1 col-6 md:col-5 lg:col-5"},[e("small",null,"Cost Center")],-1),Ue={class:"px-3 py-1 col-6 md:col-7 lg:col-7"},Me={class:"col-12 md:col-7 lg:col-7 grid grid-nogutter"},Ne=e("div",{class:"px-3 py-1 col-6 md:col-4 lg:col-4"},[e("small",null,"Storage Location")],-1),ze={class:"px-3 py-1 col-6 md:col-8 lg:col-8"},Ge={class:"col-12 md:col-5 lg:col-5 grid grid-nogutter"},Le=e("div",{class:"px-3 py-1 col-6 md:col-5 lg:col-5"},[e("small",null,"Order")],-1),Ve={class:"px-3 py-1 col-6 md:col-7 lg:col-7"},qe={class:"col-12 md:col-7 lg:col-7 grid grid-nogutter"},Je=e("div",{class:"px-3 py-1 col-6 md:col-4 lg:col-4"},[e("small",null,"Receiving S. Loc")],-1),Ke={class:"px-3 py-1 col-6 md:col-8 lg:col-8"},Qe=e("div",{class:"col-12 md:col-5 lg:col-5 grid grid-nogutter"},null,-1),He=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"100%"}},[e("span",{style:{width:"100%"}},"No")],-1),We=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Material Code")],-1),Xe=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Material Description")],-1),Ye=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Item")],-1),Ze=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Plant")],-1),et=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Qty")],-1),tt=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"UoM")],-1),ot=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Batch")],-1),lt=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Storage Bin")],-1),st=e("div",{class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"text-align":"center",width:"90%"}},[e("span",{style:{width:"100%"}},"Status")],-1),at={key:0,style:{color:"green"}},nt={key:1,class:"text-primary"},ct=e("div",{class:"my-5"},null,-1),dt={class:"m-0"},it={class:"m-0"},rt=["src"],_t={__name:"OutbounddetailPage",setup(mt){const z=ee(),b=te(),v=oe(),f=u(null),T=u(null),G=u(null),a=u([]),L=u(null),V=u({}),q=u(null),k=u(null),J=u([{label:"Outbound",route:"/outbound"},{label:"Detail"}]),K=n=>{const d=new Date(n),c={year:"numeric",month:"2-digit",day:"2-digit"};return d.toLocaleDateString(void 0,c)};le(async()=>{const n=z.state.department_id;console.log("plis",n),T.value=b.currentRoute.value.meta?b.currentRoute.value.meta.dataToSend.value:null,console.log("Received data:",T.value)});const Q=async()=>{try{const n=`${w}/api/outbound/${k.value}`,d=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),c=await d.json();if(console.log(c,"anjingg"),d.ok)a.value=c.data;else throw new Error(c.error||"Failed to fetch data from API")}catch{v.add({severity:"error",summary:"Error",detail:"Failed to fetch data from API",life:5e3})}};se(async()=>{k.value=b.currentRoute.value.params.id;try{const d=await(await fetch(`${w}/api/auth/get_user/`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();G.value=d.data.departement_id;const c=`${w}/api/outbound/${k.value}`,g=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}}),h=await g.json();if(console.log(h,"anjingg"),g.ok)a.value=h.data;else throw new Error(h.error||"Failed to fetch data from API")}catch(n){console.error("Error fetching data from API:",n),v.add({severity:"error",summary:"Error",detail:"Failed to fetch data from API",life:5e3})}});const H=async()=>{try{const n=f.value.map(h=>h.id),d=`${w}/api/outbound/release`,c=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({selectedIds:n})}),g=await c.json();if(c.ok)f.value=[],Q(),v.add({severity:"success",summary:"Success",detail:g.message,life:5e3});else throw new Error(g.error||"Failed to release data")}catch(n){console.error("Error releasing data:",n),v.add({severity:"error",summary:"Error",detail:"Failed to release data",life:5e3})}};return(n,d)=>{var A,B,R,D,E,P,I,$,O,F;const c=r("router-link"),g=r("Breadcrumb"),h=r("Toast"),j=r("Toolbar"),S=r("Divider"),W=r("Button"),i=r("Column"),X=r("DataTable"),C=r("AccordionTab"),Y=r("Accordion");return _(),y(ae,null,[s(g,{model:J.value},{item:o(({item:t,props:p})=>[t.route?(_(),U(c,{key:0,to:t.route,custom:""},{default:o(({href:x,navigate:Z})=>[e("a",M({href:x},p.action,{onClick:Z}),[e("span",{class:ne([t.icon,"text-color"])},null,2),e("span",de,l(t.label),1)],16,ce)]),_:2},1032,["to"])):(_(),y("a",M({key:1,href:t.url,target:t.target},p.action),[e("span",re,l(t.label),1)],16,ie))]),_:1},8,["model"]),e("div",me,[e("pre",null,l(a.value),1),e("div",ue,[e("div",_e,[s(h),s(j,{class:"mb-4 p-0",style:{border:"none","background-color":"white"}},{start:o(()=>{var t;return[e("div",pe,[e("h5",ge,l((t=a.value[0])==null?void 0:t.code),1)])]}),end:o(()=>{var t,p;return[e("div",he,[e("p",ye,[m("Status : "),((t=a.value[0])==null?void 0:t.status)==2||((p=a.value[0])==null?void 0:p.status)==9?(_(),y("span",fe,"Complete")):(_(),y("span",ve,"On Progress"))])])]}),_:1}),s(S),e("div",xe,[e("div",we,[be,e("div",ke,[e("small",null,": "+l(K((A=a.value[0])==null?void 0:A.date)),1)])]),e("div",Te,[je,e("div",Se,[e("small",null,": "+l((B=a.value[0])==null?void 0:B.mvt_code),1)])]),e("div",Ce,[Ae,e("div",Be,[e("small",null,": "+l((R=a.value[0])==null?void 0:R.ref_code),1)])]),e("div",Re,[De,e("div",Ee,[e("small",null,": "+l((D=a.value[0])==null?void 0:D.good_recepient),1)])]),e("div",Pe,[Ie,e("div",$e,[e("small",null,": "+l((E=a.value[0])==null?void 0:E.ref_type),1)])]),e("div",Oe,[Fe,e("div",Ue,[e("small",null,": "+l((P=a.value[0])==null?void 0:P.cost_center),1)])]),e("div",Me,[Ne,e("div",ze,[e("small",null,": "+l((I=a.value[0])==null?void 0:I.s_loc),1)])]),e("div",Ge,[Le,e("div",Ve,[e("small",null,": "+l(($=a.value[0])==null?void 0:$.order),1)])]),e("div",qe,[Je,e("div",Ke,[e("small",null,": "+l((O=a.value[0])==null?void 0:O.receiving_s_loc),1)])]),Qe]),s(S,{class:"mb-3"}),s(j,{class:"bg-white border-none"},{end:o(()=>[f.value&&f.value.length?(_(),U(W,{key:0,label:"Release to SAP",class:"p-button-primary",onClick:H})):N("",!0)]),_:1}),s(X,{ref_key:"dt",ref:L,value:(F=a.value[0])==null?void 0:F.materials,selection:f.value,"onUpdate:selection":d[0]||(d[0]=t=>f.value=t),filters:V.value,loading:q.value,dataKey:"id",class:"p-datatable-gridlines",rows:10,responsiveLayout:"scroll"},{default:o(()=>[s(i,{selectionMode:"multiple",headerStyle:"width:3%"}),s(i,{field:"rowIndex",style:{"text-align":"center"}},{header:o(()=>[He]),body:o(t=>[m(l(t.index+1),1)]),_:1}),s(i,{field:"material_code"},{header:o(()=>[We]),body:o(t=>[m(l(t.data.material_code),1)]),_:1}),s(i,{field:"material_description"},{header:o(()=>[Xe]),body:o(t=>[m(l(t.data.material_description),1)]),_:1}),s(i,{field:"item"},{header:o(()=>[Ye]),body:o(t=>[m(l(t.data.item),1)]),_:1}),s(i,{field:"plant"},{header:o(()=>[Ze]),body:o(t=>[m(l(t.data.plant),1)]),_:1}),s(i,{field:"qty"},{header:o(()=>[et]),body:o(t=>[m(l(t.data.qty),1)]),_:1}),s(i,{field:"uom"},{header:o(()=>[tt]),body:o(t=>[m(l(t.data.uom),1)]),_:1}),s(i,{field:"batch"},{header:o(()=>[ot]),body:o(t=>[m(l(t.data.batch),1)]),_:1}),s(i,{field:"s_bin"},{header:o(()=>[lt]),body:o(t=>[m(l(t.data.s_bin),1)]),_:1}),s(i,{field:"status"},{header:o(()=>[st]),body:o(t=>[t.data.status==2?(_(),y("p",at,"Complete")):(_(),y("p",nt,"On Progress"))]),_:1})]),_:1},8,["value","selection","filters","loading"]),ct,s(Y,{multiple:!0},{default:o(()=>[s(C,{header:"Outbound Notes",class:"p-0 m-0"},{default:o(()=>{var t;return[e("p",dt,l((t=a.value[0])==null?void 0:t.notes),1)]}),_:1}),s(C,{header:"Confirmation of Receipt",class:"p-0 m-0"},{default:o(()=>{var t,p,x;return[e("p",it,"Good Recipient : "+l((t=a.value[0])==null?void 0:t.good_recepient),1),e("p",null,[(p=a.value[0])!=null&&p.photo?(_(),y("img",{key:0,src:(x=a.value[0])==null?void 0:x.photo,alt:"Receipt Image",style:{width:"100%"}},null,8,rt)):N("",!0)])]}),_:1})]),_:1})])])])],64)}}};export{_t as default};
